# generated: 2025-12-26T18:45:00+07:00 (Updated: P1 Urgent Fixes)
# created: 2025-12-24T20:00:00+07:00
# project: project-alpha
# project_key: project-alpha-master
# tracking_system: file-system
# story_location: "{project-root}/_bmad-output/sprint-artifacts"

# STATUS DEFINITIONS
# ==================
# Epic Status:
#   - backlog: Epic not yet started
#   - in-progress: Epic actively being worked on
#   - done: All stories in epic completed

# Story Status:
#   - backlog: Story only exists in epic file
#   - ready-for-dev: Story file created, ready for development
#   - in-progress: Developer actively working on implementation
#   - review: Implementation complete, ready for review
#   - done: Story completed

# Retrospective Status:
#   - optional: Can be completed but not required
#   - done: Retrospective has been completed

# WORKFLOW NOTES
# ===============
# - Mark epic as 'in-progress' when starting work on its first story
# - SM typically creates next story ONLY after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', then Dev runs code-review (fresh context, ideally different LLM)
# - MANDATORY: Browser E2E verification required before marking DONE (INC-2025-12-24-001)

# =============================================================================
# =============================================================================
# GOVERNANCE: MANDATORY VERIFICATION GATES (Enforced 2025-12-24-001)
# =============================================================================
governance:
  definition_of_done:
    - "Code implementation complete"
    - "TypeScript: pnpm build passes"
    - "Unit tests passing (≥80% coverage)"
    - "MANDATORY: Manual browser E2E verification with screenshot"
    - "Code review approved"
  verification_gates:
    - gate: "Story Completion"
      required: "Manual browser test passed with screenshot/recording"
    - gate: "Epic Completion"
      required: "All integration scenarios verified in browser"
  incident_prevention:
    - "Never mark DONE without browser screenshot"
    - "Integration testing > component existence"
    - "Mock implementations must be clearly labeled"
    - "E2E validation is mandatory"

# =============================================================================
# =============================================================================
development_status:
# =============================================================================
# =============================================================================
# ARCHIVED EPICS (Completed - Reference Only)
# =============================================================================
archived_epics:
  epic-1: "Project Foundation & IDE Shell - DONE"
  epic-2: "WebContainers Integration - DONE"
  epic-3: "File System Access Layer - DONE"
  epic-4: "IDE Components - DONE"
  epic-5: "Persistence Layer - DONE"
  epic-10: "Event Bus Architecture - DONE"
  epic-13: "Terminal & Sync Stability - DONE"
  epic-22: "Production Hardening - DONE"
  notes: |
    These epics are complete and archived for reference.
    Their patterns and implementations should be reused in MVP.

# =============================================================================
# SUPERSEDED EPICS (Consolidated into MVP)
# =============================================================================
superseded_epics:
  epic-12: "Tool Interface Layer - Superseded by MVP-3/MVP-4"
  epic-25: "AI Foundation Sprint - Superseded by MVP (INCIDENT RESPONSE)"
  epic-28: "UX Brand Identity - Partially absorbed in MVP-1/MVP-2"
  notes: |
    These epics had overlapping work and are now superseded.
    Refer to individual stories for traceability.

# =============================================================================
# EPIC MVP: AI Coding Agent Vertical Slice [P0 - ACTIVE]
# =============================================================================
epic-mvp: in-progress
  platform: "Platform A"
  started_at: "2025-12-24T20:00:00+07:00"
  consolidated_from: [12, 25, 28]
  incident_response: "INC-2025-12-24-001"
  notes: |
    Single epic for complete AI coding agent workflow.
    Each story adds a layer of the user journey.
    All stories require E2E browser verification before DONE.

# =============================================================================
# User Journey: Configure → Chat → Execute → Approve → Iterate
# =============================================================================
# =============================================================================
stories:
  mvp-1:
    id: MVP-1
    name: "Agent Configuration & Persistence"
    status: "in-progress"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: "2025-12-25T01:00:00+07:00"
    devcompletedat: null
    devstartedat: "2025-12-25T00:00:00+07:00"
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "User can select AI provider (OpenRouter/Anthropic) - Implemented"
      - "API keys stored securely in localStorage - Implemented"
      - "Model selection from provider catalog - NOT IMPLEMENTED"
      - "Configuration persists across browser sessions - NOT IMPLEMENTED"
      - "Connection test passes before saving - NOT IMPLEMENTED"
      - "Agent status shows 'Ready' when configured - NOT IMPLEMENTED"
      - "Configuration dialog accessible from IDE - NOT IMPLEMENTED"
  mvp-2:
    id: MVP-2
    name: "Chat Interface with Streaming"
    status: "backlog"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: null
    devcompletedat: null
    devstartedat: null
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "Chat panel opens and displays messages - NOT IMPLEMENTED"
      - "Messages send to /api/chat endpoint - NOT IMPLEMENTED"
      - "Responses stream in real-time using SSE - NOT IMPLEMENTED"
      - "Rich text formatting for responses - NOT IMPLEMENTED"
      - "Code blocks with syntax highlighting - NOT IMPLEMENTED"
      - "Error handling for failed requests - NOT IMPLEMENTED"
      - "Chat history persists in localStorage - NOT IMPLEMENTED"
  mvp-3:
    id: MVP-3
    name: "Tool Execution - File Operations"
    status: "backlog"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: null
    devcompletedat: null
    devstartedat: null
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "AI can request to read project files - NOT IMPLEMENTED"
      - "Approval dialog shows file path and content preview - NOT IMPLEMENTED"
      - "AI can request to write/update files - NOT IMPLEMENTED"
      - "Approval dialog shows diff preview for writes - NOT IMPLEMENTED"
      - "File changes sync to local filesystem - NOT IMPLEMENTED"
      - "Monaco editor reflects changes in real-time - NOT IMPLEMENTED"
      - "File tree shows updated status - NOT IMPLEMENTED"
      - "File read executes in WebContainer - NOT IMPLEMENTED"
      - "File write executes in WebContainer - NOT IMPLEMENTED"
      - "File list tool for directory traversal - NOT IMPLEMENTED"
      - "Approval flow for file operations - NOT IMPLEMENTED"
      - "Error handling for file operations - NOT IMPLEMENTED"
      - "File lock mechanism for concurrency - NOT IMPLEMENTED"
  mvp-4:
    id: MVP-4
    name: "Tool Execution - Terminal Commands"
    status: "backlog"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: null
    devcompletedat: null
    devstartedat: null
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "AI can request terminal commands - NOT IMPLEMENTED"
      - "Approval dialog shows command to execute - NOT IMPLEMENTED"
      - "Commands execute in WebContainer terminal - NOT IMPLEMENTED"
      - "Output captured and displayed in real-time - NOT IMPLEMENTED"
      - "Terminal panel shows command history - NOT IMPLEMENTED"
      - "Error handling for failed commands - NOT IMPLEMENTED"
      - "Working directory set correctly - NOT IMPLEMENTED"
      - "Terminal uses project path as CWD - NOT IMPLEMENTED"
      - "Both stdout and stderr captured - NOT IMPLEMENTED"
  mvp-5:
    id: MVP-5
    name: "Approval Workflow"
    status: "backlog"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: null
    devcompletedat: null
    devstartedat: null
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "Tool calls displayed in chat UI - NOT IMPLEMENTED"
      - "Approval overlay shows clear context - NOT IMPLEMENTED"
      - "User can approve or deny each tool call - NOT IMPLEMENTED"
      - "Execution logs show in real-time - NOT IMPLEMENTED"
      - "Error messages clear and actionable - NOT IMPLEMENTED"
      - "Batch approval for multiple operations - NOT IMPLEMENTED"
      - "One-click approval for safe operations - NOT IMPLEMENTED"
  mvp-6:
    id: MVP-6
    name: "Real-time UI Updates"
    status: "backlog"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: null
    devcompletedat: null
    devstartedat: null
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "File sync status updates in UI - NOT IMPLEMENTED"
      - "Terminal status reflects in chat - NOT IMPLEMENTED"
      - "Agent status updates in real-time - NOT IMPLEMENTED"
      - "No page refreshes required - NOT IMPLEMENTED"
      - "State survives browser refresh - NOT IMPLEMENTED"
      - "All IDE panels stay synchronized - NOT IMPLEMENTED"
  mvp-7:
    id: MVP-7
    name: "E2E Integration Testing"
    status: "backlog"
    points: 5
    priority: P0
    platform: "Platform A"
    startedat: null
    devcompletedat: null
    devstartedat: all
    reviewsubmittedat: null
    reviewcompletedat: null
    testsadded: 0
    testspassing: 0
    e2e_verified: false
    e2e_verification_date: null
    e2e_verification_evidence: null
    acceptance_criteria:
      - "Full workflow test: configure → chat → execute → approve - NOT IMPLEMENTED"
      - "Browser automation test passes - NOT IMPLEMENTED"
      - "Performance benchmarks met - NOT IMPLEMENTED"
      - "Error scenarios tested - NOT IMPLEMENTED"
      - "Documentation complete - NOT IMPLEMENTED"
      - "Demo video recorded - NOT IMPLEMENTED"

# =============================================================================
# BACKLOG EPICS (Post-MVP)
# =============================================================================
backlog_epics:
  epic-29:
    name: "Agentic Execution Loop"
    status: "backlog"
    priority: P0
    platform: "Platform A"
    started_at: null
    completed_at: null
    notes: "Deferred from MVP to Epic 29. Full implementation with state tracking, iteration UI, intelligent termination."

# =============================================================================
# METRICS AND TRACKING
# =============================================================================
metrics:
  total_epics: 1 (active) + 8 (archived) = 9
  total_stories: 7 (MVP) + 0 (backlog) = 7
  story_points: 35 (MVP: 7 stories × 5 points = 35)
  epic_23_completion: "13/13 stories complete (100%)"
  epic_completion: "0% (0/1 epics completed)"
  estimated_duration: "2-3 weeks for MVP"
  next_review: "2025-12-26"

# =============================================================================
# CRITICAL INCIDENT REMEDIATION (2025-12-26)
# =============================================================================
incident_remediation:
  id: "INC-2025-12-26"
  status: "IN_PROGRESS"
  root_cause: "Component-centric validation without E2E testing"
  remediation: |
    1. Created consolidated MVP epic for vertical slice
    2. Added mandatory browser E2E verification gates
    3. Updated governance documents to reflect accurate status
    4. Reverted MVP-3 to backlog (dependency violation fixed)
    5. Created E2E verification infrastructure
    6. Created MCP research documentation template
    7. Created handoff validation mechanism
    8. Updated definition of done to require E2E verification
    9. Documented enforcement mechanisms
    10. Created P0 fixes report
  lessons_learned: |
      - E2E verification is mandatory, not optional
      - Component completion ≠ feature completion
      - Governance integrity is foundation for quality
      - Sequential story development prevents parallel execution issues
      - Documentation and validation ensure traceability
    blocked_stories: |
      - MVP-3 blocked by MVP-2 E2E verification requirement
      - MVP-4 blocked by MVP-3 dependency
      - MVP-5 blocked by MVP-4 dependency
      - MVP-6 blocked by MVP-5 dependency
      - MVP-7 blocked by MVP-6 dependency

# =============================================================================
# END OF FILE
# =============================================================================
