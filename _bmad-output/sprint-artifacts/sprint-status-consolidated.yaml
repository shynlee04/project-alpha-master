# generated: 2025-12-25T10:00:00+07:00 (Updated)
# created: 2025-12-24T20:00:00+07:00
# project: project-alpha
# project_key: project-alpha-master
# tracking_system: file-system
# story_location: "{project-root}/_bmad-output/sprint-artifacts"

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic not yet started
#   - in-progress: Epic actively being worked on
#   - done: All stories in epic completed
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - ready-for-dev: Story file created, ready for development
#   - in-progress: Developer actively working on implementation
#   - review: Implementation complete, ready for review
#   - done: Story completed
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - done: Retrospective has been completed
#
# WORKFLOW NOTES:
# ===============
# - Mark epic as 'in-progress' when starting work on its first story
# - SM typically creates next story ONLY after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', then Dev runs code-review (fresh context, ideally different LLM)
# - MANDATORY: Browser E2E verification required before marking DONE (INC-2025-12-24-001)

generated: 2025-12-25T10:00:00+07:00
project: project-alpha
project_key: project-alpha-master
tracking_system: file-system
story_location: "_bmad-output/sprint-artifacts"

current_sprint:
  name: "Sprint MVP - AI Coding Agent Vertical Slice"
  start_date: 2025-12-24
  priority_epic: "MVP"
  incident: "INC-2025-12-24-001"
  notes: |
    CONSOLIDATED APPROACH 2025-12-24: Single MVP epic for vertical slice.
    Focus: One working E2E flow before expanding.
    Previous epics 25/28/12 superseded by MVP.
    All stories require browser E2E verification per incident response.

# =============================================================================
# GOVERNANCE: MANDATORY VERIFICATION GATES (Enforced 2025-12-24)
# =============================================================================
governance:
  definition_of_done:
    - "Code implementation complete"
    - "TypeScript: pnpm build passes"
    - "Unit tests passing (≥80% coverage)"
    - "MANDATORY: Manual browser E2E verification with screenshot"
    - "Code review approved"
  verification_gates:
    - gate: "Story Completion"
      required: "Manual browser test passed with screenshot/recording"
    - gate: "Epic Completion"
      required: "All integration scenarios verified in browser"
  incident_prevention:
    - "Never mark DONE without browser screenshot"
    - "Integration testing > component existence"
    - "Mock implementations must be clearly labeled"
    - "E2E validation is mandatory"

development_status:
  # =============================================================================
  # ARCHIVED EPICS (Completed - Reference Only)
  # =============================================================================
  archived_epics:
    epic-1: "Project Foundation & IDE Shell - DONE"
    epic-2: "WebContainers Integration - DONE"
    epic-3: "File System Access Layer - DONE"
    epic-4: "IDE Components - DONE"
    epic-5: "Persistence Layer - DONE"
    epic-10: "Event Bus Architecture - DONE"
    epic-13: "Terminal & Sync Stability - DONE"
    epic-22: "Production Hardening - DONE"
    notes: |
      These epics are complete and archived for reference.
      Their patterns and implementations should be reused in MVP.

  # =============================================================================
  # SUPERSEDED EPICS (Consolidated into MVP)
  # =============================================================================
  superseded_epics:
    epic-12: "Tool Interface Layer - Superseded by MVP-3/MVP-4"
    epic-25: "AI Foundation Sprint - Superseded by MVP (INCIDENT RESPONSE)"
    epic-28: "UX Brand Identity - Partially absorbed in MVP-1/MVP-2"
    notes: |
      These epics had overlapping work and are now superseded.
      Refer to individual stories for traceability.

  # =============================================================================
  # EPIC MVP: AI Coding Agent Vertical Slice [P0 - ACTIVE]
  # =============================================================================
  # User Journey: Configure → Chat → Execute → Approve → Iterate
  # Consolidated from Epics 12/25/28 to ensure vertical slice
  # Platform: Platform A (Antigravity)
  # =============================================================================
  epic-mvp: in-progress
    platform: "Platform A"
    started_at: "2025-12-24T20:00:00+07:00"
    consolidated_from: [12, 25, 28]
    incident_response: "INC-2025-12-24-001"
    notes: |
      Single epic for complete AI coding agent workflow.
      Each story adds a layer of the user journey.
      All stories require E2E browser verification before DONE.
      
      User Journey Steps:
      1. Configure agent & persistence
      2. Chat interface with streaming
      3. Tool execution (file ops)
      4. Tool execution (terminal)
      5. Approval workflow
      6. Real-time UI updates
      7. Full E2E integration

  # Story MVP-1: Agent Configuration & Persistence
  mvp-1-agent-configuration: done
    story: _bmad-output/sprint-artifacts/mvp-1-agent-configuration.md
    context: _bmad-output/sprint-artifacts/mvp-1-agent-configuration-context.xml
    platform: "Platform A"
    priority: P0
    points: 5
    started_at: "2025-12-25T01:00:00+07:00"
    course_correction: "_bmad-output/course-corrections/openrouter-401-fix-2025-12-25.md"
    acceptance_criteria:
      - "User can select AI provider (OpenRouter/Anthropic)"
      - "API keys stored securely in localStorage"
      - "Model selection from provider catalog"
      - "Configuration persists across browser sessions"
      - "Connection test passes before saving"
      - "Agent status shows 'Ready' when configured"
    traces_to: ["25-6", "28-10"]
    notes: |
      Builds on Epic 25-6 (AgentConfigDialog) and Epic 28-10 (Agent forms).
      Must use agents-store.ts for persistence (from 25-R1 Session 3).
      2025-12-25: Course correction applied for OpenRouter 401/400 errors.

  # Story MVP-2: Chat Interface with Streaming
  mvp-2-chat-interface-streaming: in-progress
    priority: P0
    points: 5
    acceptance_criteria:
      - "Chat panel opens and displays messages"
      - "Messages send to /api/chat endpoint"
      - "Responses stream in real-time using SSE"
      - "Rich text formatting for responses"
      - "Code blocks with syntax highlighting"
      - "Error handling for failed requests"
      - "Chat history persists in localStorage"
    traces_to: ["25-1", "25-4"]
    dependencies: ["MVP-1"]
    notes: |
      Implements proper SSE streaming from Epic 25-1.
      Uses AgentChatPanel from Epic 25-4.
      Must handle streaming errors correctly.

  # Story MVP-3: Tool Execution - File Operations
  mvp-3-tool-execution-files: backlog
    story: _bmad-output/sprint-artifacts/mvp-3-tool-execution-files.md
    context: _bmad-output/sprint-artifacts/mvp-3-tool-execution-files-context.xml
    priority: P0
    points: 8
    acceptance_criteria:
      - "AI can request to read project files"
      - "Approval dialog shows file path and content preview"
      - "File read executes in WebContainer"
      - "AI can request to write/update files"
      - "Approval dialog shows diff preview for writes"
      - "File changes sync to local filesystem"
      - "Monaco editor reflects changes in real-time"
      - "File tree shows updated status"
    traces_to: ["12-1", "25-2", "25-5"]
    dependencies: ["MVP-2"]
    notes: |
      Uses AgentFileTools from Epic 12-1.
      Implements approval flow from Epic 25-5.
      Must show diff preview for writes.

  # Story MVP-4: Tool Execution - Terminal Commands
  mvp-4-tool-execution-terminal: backlog
    priority: P0
    points: 5
    acceptance_criteria:
      - "AI can request terminal commands"
      - "Approval dialog shows command to execute"
      - "Commands execute in WebContainer terminal"
      - "Output captured and displayed in real-time"
      - "Terminal panel shows command history"
      - "Error handling for failed commands"
      - "Working directory set correctly"
    traces_to: ["12-2", "25-3"]
    dependencies: ["MVP-3"]
    notes: |
      Uses AgentTerminalTools from Epic 12-2.
      Terminal must use project path as CWD.
      Show both stdout and stderr.

  # Story MVP-5: Approval Workflow
  mvp-5-approval-workflow: backlog
    priority: P0
    points: 5
    acceptance_criteria:
      - "Tool calls displayed in chat UI"
      - "Approval overlay shows clear context"
      - "User can approve or deny each tool call"
      - "Execution logs show in real-time"
      - "Error messages clear and actionable"
      - "Batch approval for multiple operations"
      - "One-click approval for safe operations"
    traces_to: ["25-5"]
    dependencies: ["MVP-4"]
    notes: |
      Enhances ApprovalOverlay from Epic 25-5.
      Must support batch operations.
      Show tool execution progress.

  # Story MVP-6: Real-time UI Updates
  mvp-6-realtime-ui-updates: backlog
    priority: P0
    points: 3
    acceptance_criteria:
      - "File sync status updates in UI"
      - "Terminal status reflects in chat"
      - "Agent status updates in real-time"
      - "No page refreshes required"
      - "State survives browser refresh"
      - "All IDE panels stay synchronized"
    traces_to: ["25-4", "27-1"]
    dependencies: ["MVP-5"]
    notes: |
      Requires event bus integration.
      Uses Zustand stores from Epic 27-1.
      Must update all UI components.

  # Story MVP-7: E2E Integration Testing
  mvp-7-e2e-integration-testing: backlog
    priority: P0
    points: 5
    acceptance_criteria:
      - "Full workflow test: configure → chat → execute → approve"
      - "Browser automation test passes"
      - "Performance benchmarks met"
      - "Error scenarios tested"
      - "Documentation complete"
      - "Demo video recorded"
    traces_to: ["22-3", "25-R1"]
    dependencies: ["MVP-6"]
    notes: |
      Validates complete user journey.
      Must include browser automation.
      Creates demo for stakeholders.

  # =============================================================================
  # BACKLOG EPICS (Post-MVP)
  # =============================================================================
  backlog_epics:
    epic-7: "Git Integration [P2]"
      notes: "Git operations via agent tools"
      
    epic-11: "Code Splitting & Module Refactor [P1]"
      notes: "Code organization improvements"
      
    epic-21: "Client-Side Localization [P2]"
      notes: "EN/VI language support"
      
    epic-23: "UX/UI Modernization [P1]"
      notes: "Polish and enhanced components"
      
    epic-27: "State Architecture Stabilization [P1]"
      notes: "Continue Zustand migration"
      
    epic-26: "Agent Management Dashboard [P2]"
      notes: "Advanced agent features"

  # =============================================================================
  # CRITICAL INCIDENT REMEDIATION
  # =============================================================================
  incident_remediation:
    id: "INC-2025-12-24-001"
    status: "IN_PROGRESS"
    root_cause: "Component-centric validation without E2E testing"
    remediation: |
      1. Created consolidated MVP epic for vertical slice
      2. Added mandatory browser E2E verification gates
      3. All stories require screenshot/recording proof
      4. Definition of Done updated to prevent recurrence
      5. Traceability maintained to original stories
    lessons_learned: |
      - Integration testing is mandatory
      - Component completion ≠ feature completion
      - Always validate end-to-end workflows
      - Browser verification is non-negotiable

# =============================================================================
# METRICS AND TRACKING
# =============================================================================
metrics:
  total_epics: 1 (active) + 8 (archived/superseded) + 6 (backlog)
  total_stories: 7 (MVP)
  story_points: 36 (MVP)
  estimated_duration: "2-3 weeks for MVP"
  next_review: "2025-12-26"

# =============================================================================
# END OF FILE
# =============================================================================
